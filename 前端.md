# 图片管理网站 - 前端设计文档

## 技术栈
- **框架**: React 18
- **UI 库**: Ant Design
- **路由**: React Router
- **状态管理**: MobX
- **HTTP 请求**: Axios
- **图片编辑**: Cropper.js

## 页面设计

### 1. 登录/注册页 (`/login`, `/register`)

**布局**: 居中布局

**内容**:
- Logo 和标题
- 输入表单
  - 用户名输入框 (≥6字节)
  - 密码输入框 (≥6字节)
  - Email 输入框 (仅注册页)
- 提交按钮
- 登录/注册切换链接

---

### 2. 主页 - 图片墙 (`/home`)

**布局**: 顶部导航栏 + 侧边栏 + 主内容区

**顶部导航栏**:
- Logo
- 快速搜索框 (支持文件名、标签关键词搜索)
- 上传按钮
- 用户信息下拉菜单 (退出登录等)

**侧边栏** (窄屏可收起):
- 搜索模式切换 Tab
  - **快速筛选**: 标签云点选 + 时间线筛选
  - **高级搜索**: 条件组合搜索 + AI 自然语言搜索
  
**快速筛选模式**:
- 标签云 (按类型分组: 自定义/EXIF/AI, 点击标签即时过滤)
- 时间范围选择器
- 重置按钮

**高级搜索模式**:
- 条件搜索 Tab:
  - 文件名输入框
  - 标签多选框
  - 时间范围选择器
  - EXIF 信息筛选 (地点、设备)
- AI 搜索 Tab:
  - 自然语言输入框 (如"找找我在海边拍的照片")
  - AI 搜索按钮
- 搜索/重置按钮

**主内容区**:
- 响应式网格/瀑布流展示缩略图
  - PC: 6列
  - 平板: 4列
  - 手机: 2列
- 图片卡片显示: 缩略图、文件名、标签
- 支持"选择模式"进行批量操作
  - 勾选多张图片
  - 批量添加标签
  - 批量删除
  - 全屏轮播展示按钮 (选中多张图片后显示)
- 搜索结果展示: 当使用搜索/筛选功能时，主内容区实时显示过滤后的图片
- 底部分页/懒加载

---

### 3. 图片详情页 (`/image/:id`)

**布局**: 左右分栏 (移动端上下布局)

**左侧区域**:
- 高清大图展示
- 上一张/下一张导航按钮
- 轮播控制按钮

**右侧区域**:
- 图片元数据
  - 文件名
  - 分辨率
  - 文件大小
  - 上传时间
  - 拍摄时间 (EXIF)
  - 拍摄地点 (EXIF)
  - 设备信息 (EXIF)
- 标签列表 (可增删, 按类型标识)
- 操作按钮组
  - 编辑按钮
  - AI 分析按钮
  - 下载按钮
  - 删除按钮

---

### 4. 图片上传页 (`/upload`)

**布局**: 居中布局

**内容**:
- 拖拽上传区域
- 文件选择按钮 (支持多选)
- 上传列表
  - 每张图片显示: 缩略图预览、文件名、大小
  - 上传进度条
  - 状态标识 (等待/上传中/成功/失败)
- 批量操作按钮 (全部上传/清空列表)

---

### 5. 图片编辑页 (`/edit/:id`)

**布局**: 全屏布局

**内容**:
- 顶部工具栏
  - 返回按钮
  - 保存按钮
  - 取消按钮
- 主编辑区 (Cropper.js)
  - 图片画布
  - 裁剪框
- 侧边工具面板
  - 裁剪工具
  - 旋转工具
  - 色调调整 (亮度、对比度、饱和度)

---

## 响应式设计要点

### 断点设置
- 手机: `< 768px`
- 平板: `768px - 1024px`
- PC: `> 1024px`

### 适配策略
- 使用 Ant Design 的 Grid 系统
- 侧边栏在手机端收起到汉堡菜单
- 图片墙列数自动调整
- 详情页左右分栏在移动端改为上下布局
- 触摸设备优化手势操作

---

## 路由结构

```
/
├── /login              # 登录页
├── /register           # 注册页
├── /home               # 主页 (图片墙 + 集成搜索功能)
├── /upload             # 上传页
├── /image/:id          # 图片详情页
└── /edit/:id           # 图片编辑页
```

---

## 状态管理 (MobX Store)

### 1. UserStore - 用户认证
- 用户信息 (`user`)
- 登录状态 (`isLoggedIn`)
- JWT Token (`token`)

### 2. ImageStore - 图片和标签管理
**图片数据**:
- 图片列表 (`images`)
- 当前图片详情 (`currentImage`)
- 选中的图片 (`selectedImages`)
- 搜索/筛选条件 (`searchParams`)
- 分页信息 (`pagination`)
- 加载状态 (`loading`)

**标签相关** (集成到 ImageStore):
- 所有标签列表 (计算属性 `allTags`)
- 标签云数据 (计算属性 `tagCloud`)
- 按类型分组的标签 (计算属性 `tagsByType`)

**UI 状态** (跨组件共享的 UI 状态):
- 选择模式开关 (`selectionMode`)

**说明**: 
- 标签数据作为图片的附属信息，集成到 ImageStore 中，通过计算属性从 `images` 提取
- 大部分 UI 状态（如侧边栏展开/收起、弹窗显示等）使用组件本地 `useState` 管理
- 只有需要跨多个组件共享的状态（如 `selectionMode`）才放入 Store

